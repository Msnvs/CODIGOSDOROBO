#include <Servo.h>

const int leftSensor = A0;
const int centerSensor = A1;
const int rightSensor = A2;
const int ledLeft = 4; // Pino do LED esquerdo
const int ledRight = 5; // Pino do LED direito

Servo motor; // Cria um objeto Servo para controlar o motor

void setup() {
  pinMode(leftSensor, INPUT);
  pinMode(centerSensor, INPUT);
  pinMode(rightSensor, INPUT);
  pinMode(ledLeft, OUTPUT);
  pinMode(ledRight, OUTPUT);
  motor.attach(2); // Pino de controle do motor (ponte H)
  
  // Liga os LEDs como faróis do carro
  digitalWrite(ledLeft, HIGH);
  digitalWrite(ledRight, HIGH);
}

void loop() {
  int leftValue = analogRead(leftSensor);
  int centerValue = analogRead(centerSensor);
  int rightValue = analogRead(rightSensor);

  if (centerValue > 700) { // Se o sensor central detecta a linha com mais intensidade
    forward(); // Motor vai para frente
  } else if (leftValue > 500) { // Se o sensor esquerdo detecta a linha
    turnLeft(); // Motor vira para a esquerda
  } else if (rightValue > 500) { // Se o sensor direito detecta a linha
    turnRight(); // Motor vira para a direita
  } else { // Se nenhum sensor detecta a linha
    stop(); // Motor para
  }
  delay(50);
}

void forward() {
  motor.write(180); // Motor vai para frente
}

void backward() {
  motor.write(0); // Motor vai para trás
}

void turnLeft() {
  motor.write(120); // Motor vira para a esquerda
}

void turnRight() {
  motor.write(60); // Motor vira para a direita
}

void stop() {
  motor.write(90); // Motor para
}
